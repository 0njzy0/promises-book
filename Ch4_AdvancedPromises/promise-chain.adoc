== Promiseとメソッドチェーン

Promiseは`then`や`catch`等のメソッドを繋げて書いていきます。
これはDOMやjQuery等でよくみられるメソッドチェーンとよく似ています。

一般的なメソッドチェーンは`this`を返すことで、メソッドを繋げられるようにしています。

一方、Promiseは<<then-return-new-promise, 毎回新しいpromiseオブジェクトを返す>>ようになっていますが、
一般的なメソッドチェーンと見た目は全く同じです。

このセクションでは、一般的なメソッドチェーンで書かれたものを
使い方はそのままで中身はPromiseで処理されるようにするやり方について学んでいきたいと思います。

=== fsのメソッドチェーン

以下のようなNode.jsの`fs`モジュールを例にしてみたいと思います。

[source,js]
[[fs-method-chain.js]]
.fs-method-chain.js
----
include::src/fs-method-chain.js[]
----

[source,js]
----
var inputFilePath = "input.txt",
    outputFilePath = "output.txt";
File.read(inputFilePath)
    .transform(function (content) {
        return ">>" + content;
    })
    .write(outputFilePath);
----

